<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Headless Simulation · Flight.jl</title><meta name="title" content="Headless Simulation · Flight.jl"/><meta property="og:title" content="Headless Simulation · Flight.jl"/><meta property="twitter:title" content="Headless Simulation · Flight.jl"/><meta name="description" content="Documentation for Flight.jl."/><meta property="og:description" content="Documentation for Flight.jl."/><meta property="twitter:description" content="Documentation for Flight.jl."/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">Flight.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorial01/tutorial01/">Interactive Simulation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Headless Simulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Headless Simulation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/e271828e/Flight.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/e271828e/Flight.jl/blob/master/docs/src/tutorials/tutorial02/tutorial02.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Headless-Simulation"><a class="docs-heading-anchor" href="#Headless-Simulation">Headless Simulation</a><a id="Headless-Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Headless-Simulation" title="Permalink"></a></h1><p>In this tutorial, we revisit our setup from the <a href="../../tutorial01/tutorial01/#Interactive-Simulation">interactive simulation</a> walkthrough. This time, we will learn how to run the <code>Simulation</code> programmatically and extract results for inspection and plotting.</p><h3 id="Peeking-Into-the-Simulation-Model"><a class="docs-heading-anchor" href="#Peeking-Into-the-Simulation-Model">Peeking Into the Simulation <code>Model</code></a><a id="Peeking-Into-the-Simulation-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Peeking-Into-the-Simulation-Model" title="Permalink"></a></h3><p>Let&#39;s begin by recreating our <code>SimpleWorld</code> instance:</p><pre><code class="language-julia hljs">using Flight

loc_LOWS15 = LatLon(ϕ = deg2rad(47.80433), λ = deg2rad(12.997))
h_LOWS15 = HOrth(427.2)
ψ_LOWS15 = deg2rad(157)
world = SimpleWorld(Cessna172Xv1(), SimpleAtmosphere(), HorizontalTerrain(h_LOWS15))</code></pre><p>Inspecting its type hierarchy reveals that <code>SimpleWorld</code> is a concrete subtype of the abstract type <code>ModelDefinition</code>:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using InteractiveUtils</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; supertypes(SimpleWorld)</code><code class="nohighlight hljs ansi" style="display:block;">(SimpleWorld, AbstractWorld, ModelDefinition, Any)</code></pre><p>A <code>ModelDefinition</code> subtype can be thought of as the blueprint for a specific <code>Model</code> instance. More precisely, it defines a <code>Model</code>&#39;s states, inputs, outputs, constants and subcomponents. To instantiate a <code>Model</code>, we call the <code>Model</code> constructor on a <code>ModelDefinition</code> subtype:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; mdl = Model(world)</code><code class="nohighlight hljs ansi" style="display:block;">Model{SimpleWorld{Flight.FlightLib.AircraftBase.Aircraft{Flight.FlightLib.AircraftBase.Vehicle{Flight.Flig...}(...)</code></pre><p>A complex <code>Model</code> can contain multiple, hierarchically arranged subcomponents, each one of them itself a <code>Model</code>. To inspect a <code>Model</code>&#39;s hierarchy, you can do the following:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using AbstractTrees</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; print_tree(mdl, maxdepth = 10)</code><code class="nohighlight hljs ansi" style="display:block;">Model{SimpleWorld{Flight.FlightLib.AircraftBase.Aircraft{Flight.FlightLib.AircraftBase.Vehicle{Flight.Flig...}(...)
├─ :aircraft ⇒ Model{Flight.FlightLib.AircraftBase.Aircraft{Flight.FlightLib.AircraftBase.Vehicle{Flight.FlightAircraft.C...}(...)
│              ├─ :vehicle ⇒ Model{Flight.FlightLib.AircraftBase.Vehicle{Flight.FlightAircraft.C172.Systems{PistonThruster{PistonEngine...}(...)
│              │             ├─ :systems ⇒ Model{Flight.FlightAircraft.C172.Systems{PistonThruster{PistonEngine{@NamedTuple{δ_wot::Interpolations.Ext...}(...)
│              │             │             ├─ :afm ⇒ Model{Flight.FlightAircraft.C172.Airframe}(...)
│              │             │             ├─ :aero ⇒ Model{Flight.FlightAircraft.C172.Aero}(...)
│              │             │             ├─ :ldg ⇒ Model{Flight.FlightAircraft.C172.Ldg}(...)
│              │             │             │         ├─ :left ⇒ Model{LandingGearUnit{NoSteering, DirectBraking, Strut{SimpleDamper}}}(...)
│              │             │             │         │          ├─ :steering ⇒ Model{NoSteering}(...)
│              │             │             │         │          ├─ :braking ⇒ Model{DirectBraking}(...)
│              │             │             │         │          ├─ :strut ⇒ Model{Strut{SimpleDamper}}(...)
│              │             │             │         │          └─ :contact ⇒ Model{Contact}(...)
│              │             │             │         │                        └─ :frc ⇒ Model{Flight.FlightLib.Control.Continuous.PIVector{2}}(...)
│              │             │             │         ├─ :right ⇒ Model{LandingGearUnit{NoSteering, DirectBraking, Strut{SimpleDamper}}}(...)
│              │             │             │         │           ├─ :steering ⇒ Model{NoSteering}(...)
│              │             │             │         │           ├─ :braking ⇒ Model{DirectBraking}(...)
│              │             │             │         │           ├─ :strut ⇒ Model{Strut{SimpleDamper}}(...)
│              │             │             │         │           └─ :contact ⇒ Model{Contact}(...)
│              │             │             │         │                         └─ :frc ⇒ Model{Flight.FlightLib.Control.Continuous.PIVector{2}}(...)
│              │             │             │         └─ :nose ⇒ Model{LandingGearUnit{DirectSteering, NoBraking, Strut{SimpleDamper}}}(...)
│              │             │             │                    ├─ :steering ⇒ Model{DirectSteering}(...)
│              │             │             │                    ├─ :braking ⇒ Model{NoBraking}(...)
│              │             │             │                    ├─ :strut ⇒ Model{Strut{SimpleDamper}}(...)
│              │             │             │                    └─ :contact ⇒ Model{Contact}(...)
│              │             │             │                                  └─ :frc ⇒ Model{Flight.FlightLib.Control.Continuous.PIVector{2}}(...)
│              │             │             ├─ :fuel ⇒ Model{Flight.FlightAircraft.C172.Fuel}(...)
│              │             │             ├─ :pld ⇒ Model{Flight.FlightAircraft.C172.Payload}(...)
│              │             │             ├─ :pwp ⇒ Model{PistonThruster{PistonEngine{@NamedTuple{δ_wot::Interpolations.Extrapolation{Float64, 2, Interpolatio...}(...)
│              │             │             │         ├─ :engine ⇒ Model{PistonEngine{@NamedTuple{δ_wot::Interpolations.Extrapolation{Float64, 2, Interpolations.ScaledInterp...}(...)
│              │             │             │         │            ├─ :idle ⇒ Model{Flight.FlightLib.Control.Continuous.PIVector{1}}(...)
│              │             │             │         │            └─ :frc ⇒ Model{Flight.FlightLib.Control.Continuous.PIVector{1}}(...)
│              │             │             │         └─ :propeller ⇒ Model{Propeller{FixedPitch, Flight.FlightLib.Propellers.Lookup{Interpolations.Extrapolation{Float64, 3, In...}(...)
│              │             │             └─ :act ⇒ Model{Flight.FlightAircraft.C172.C172X.FlyByWireActuation}(...)
│              │             │                       ├─ :throttle ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, 0.0, 1.0}}}(...)
│              │             │                       ├─ :mixture ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, 0.0, 1.0}}}(...)
│              │             │                       ├─ :aileron ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, -1.0, 1.0}}}(...)
│              │             │                       ├─ :elevator ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, -1.0, 1.0}}}(...)
│              │             │                       ├─ :rudder ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, -1.0, 1.0}}}(...)
│              │             │                       ├─ :flaps ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, 0.0, 1.0}}}(...)
│              │             │                       ├─ :brake_left ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, 0.0, 1.0}}}(...)
│              │             │                       └─ :brake_right ⇒ Model{Flight.FlightAircraft.C172.C172X.Actuator1{Ranged{Float64, 0.0, 1.0}}}(...)
│              │             ├─ :kinematics ⇒ Model{WA}(...)
│              │             └─ :dynamics ⇒ Model{VehicleDynamics}(...)
│              └─ :avionics ⇒ Model{Flight.FlightAircraft.C172.C172X.C172Xv1.Avionics{Subsampled{Flight.FlightAircraft.C172.C172X.C172XC...}(...)
│                             └─ :ctl ⇒ Model{Flight.FlightAircraft.C172.C172X.C172XControl.Controller{Flight.FlightAircraft.C172.C172X.C172XContr...}(...)
│                                       ├─ :lon_ctl ⇒ Model{Flight.FlightAircraft.C172.C172X.C172XControl.LonControl{Flight.FlightLib.Control.Discrete.LQRTracke...}(...)
│                                       │             ├─ :e2e_lqr ⇒ Model{Flight.FlightLib.Control.Discrete.LQRTracker{6, 1, 1, 6, 1}}(...)
│                                       │             ├─ :q2e_int ⇒ Model{Flight.FlightLib.Control.Discrete.Integrator}(...)
│                                       │             ├─ :q2e_pid ⇒ Model{Flight.FlightLib.Control.Discrete.PID}(...)
│                                       │             ├─ :v2θ_pid ⇒ Model{Flight.FlightLib.Control.Discrete.PID}(...)
│                                       │             ├─ :c2θ_pid ⇒ Model{Flight.FlightLib.Control.Discrete.PID}(...)
│                                       │             └─ :v2t_pid ⇒ Model{Flight.FlightLib.Control.Discrete.PID}(...)
│                                       ├─ :lat_ctl ⇒ Model{Flight.FlightAircraft.C172.C172X.C172XControl.LatControl{Flight.FlightLib.Control.Discrete.LQRTracke...}(...)
│                                       │             ├─ :ar2ar_lqr ⇒ Model{Flight.FlightLib.Control.Discrete.LQRTracker{8, 2, 2, 16, 4}}(...)
│                                       │             ├─ :φβ2ar_lqr ⇒ Model{Flight.FlightLib.Control.Discrete.LQRTracker{8, 2, 2, 16, 4}}(...)
│                                       │             ├─ :p2φ_int ⇒ Model{Flight.FlightLib.Control.Discrete.Integrator}(...)
│                                       │             ├─ :p2φ_pid ⇒ Model{Flight.FlightLib.Control.Discrete.PID}(...)
│                                       │             └─ :χ2φ_pid ⇒ Model{Flight.FlightLib.Control.Discrete.PID}(...)
│                                       ├─ :alt_gdc ⇒ Model{Flight.FlightAircraft.C172.C172X.C172XControl.AltitudeGuidance}(...)
│                                       └─ :seg_gdc ⇒ Model{Flight.FlightAircraft.C172.C172X.C172XControl.SegmentGuidance}(...)
├─ :atmosphere ⇒ Model{SimpleAtmosphere{TunableSeaLevel, TunableWind}}(...)
│                ├─ :sl ⇒ Model{TunableSeaLevel}(...)
│                └─ :wind ⇒ Model{TunableWind}(...)
└─ :terrain ⇒ Model{HorizontalTerrain}(...)</code></pre><p>Recall that during interactive simulation, we used the <em>Aicraft &gt; Avionics &gt; Flight Control</em> GUI panel to control the aircraft. This panel corresponds to the flight control <code>Model</code>, which we can retrieve as.</p><p>We are particularly interested in this model&#39;s input structure, which we can access as:</p><p>It is the fields of this structure that the GUI panel&#39;s inputs actually mapped to. Here, we will be assigning them directly. shf(mdl.aircraft.avionics.ctl)</p><p>You may recognize some of these components from their GUI panels.</p><p>Any node in a <code>Model</code>&#39;s hierarchy can be easily accessed via dot notation. For example, to retrieve the left landing gear...</p><p>You may recognize some of these <code>Model</code>s from their GUI elements. In particular... We are particularly interested in the <code>Controller</code>&#39;s input struct shf(). This is precisely the structure that is written by the <code>Controller</code>&#39;s GUI panel</p><p>The resulting <code>Model</code> is ready for simulation:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; sim = Simulation(mdl; dt = 0.02)</code><code class="nohighlight hljs ansi" style="display:block;">Simulation{SimpleWorld{Flight.FlightLib.AircraftBase.Aircraft{Flight.FlightLib.AircraftBase.Vehicle{Flight.Flig...}(...)</code></pre><p>If a <code>ModelDefinition</code> is passed directly to the <code>Simulation</code> constructor, <code>Model</code> instantiation occurs implicitly as an intermediate step. The result is the same.</p><p>Once the <code>Simulation</code> is created, the underlying model can be easily retrieved:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; propertynames(sim)</code><code class="nohighlight hljs ansi" style="display:block;">(:mdl, :integrator, :log, :gui, :control, :io_start, :io_lock, :interfaces)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; sim.mdl</code><code class="nohighlight hljs ansi" style="display:block;">Model{SimpleWorld{Flight.FlightLib.AircraftBase.Aircraft{Flight.FlightLib.AircraftBase.Vehicle{Flight.Flig...}(...)</code></pre><hr/><p>Not necessary</p><p>Furthermore, all of its fields are themselves <code>ModelDefinition</code> subtypes:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; fieldtypes(SimpleWorld)</code><code class="nohighlight hljs ansi" style="display:block;">(Flight.FlightLib.AircraftBase.Aircraft, AbstractAtmosphere, AbstractTerrain)</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; supertype.(fieldtypes(SimpleWorld))</code><code class="nohighlight hljs ansi" style="display:block;">(ModelDefinition, ModelDefinition, ModelDefinition)</code></pre><p>Let&#39;s see what&#39;s inside:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; propertynames(mdl)</code><code class="nohighlight hljs ansi" style="display:block;">(:ẋ, :x, :u, :y, :s, :t, :Δt, :constants, :submodels, :aircraft, :atmosphere, :terrain)</code></pre><p>Brief explanation of properties</p><p>No need for this:</p><p>When the <code>Model</code> constructor is called on a <code>ModelDefinition</code>, those fields that are themselves <code>ModelDefinition</code>s are also turned into <code>Model</code>s, and they become children in the parent <code>Model</code>&#39;s hierarchy. Therefore, within <code>submodels</code> we will find <code>Model</code>s created from the <code>Cessna172Xv1</code>, <code>SimpleAtmosphere</code> and <code>HorizontalTerrain</code> objects we passed to the <code>SimpleWorld</code> constructor.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; mdl.submodels</code><code class="nohighlight hljs ansi" style="display:block;">(aircraft = Model{Flight.FlightLib.AircraftBase.Aircraft{Flight.FlightLib.AircraftBase.Vehicle{Flight.FlightAircraft.C...}(...), atmosphere = Model{SimpleAtmosphere{TunableSeaLevel, TunableWind}}(...), terrain = Model{HorizontalTerrain}(...))</code></pre><pre><code class="language-julia hljs">init_gnd = KinInit(;
    location = loc_LOWS15,
    h = h_LOWS15 + C172.Δh_to_gnd,
    q_nb = REuler(ψ_LOWS15, 0, 0),
    ) |&gt; C172.Init

init_air = C172.TrimParameters(;
    Ob = Geographic(loc_LOWS15, h_LOWS15 + 500),
    EAS = 50.0,
    ψ_nb = ψ_LOWS15,
)</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Friday 8 August 2025 10:56">Friday 8 August 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
